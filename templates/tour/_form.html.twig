{# templates/tour/_form.html.twig #}
{% set btn = button_label|default('Save') %}

{{ form_start(form, {'attr': {'class': 'space-y-7'}}) }}

  {# --- Basic info card --- #}
  <section class="rounded-2xl border border-white/10 bg-neutral-900/40 backdrop-blur-xl p-5 shadow-xl shadow-black/40">
    <div class="flex items-start justify-between gap-4">
      <div>
        <h2 class="text-base font-semibold text-white">Visitor Details</h2>
        <p class="text-xs text-neutral-400 mt-1">Contact info for the booking.</p>
      </div>
    </div>

    <div class="mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        {{ form_label(form.name, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
        {{ form_widget(form.name, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'}}) }}
        <div class="text-red-400 text-xs mt-1">{{ form_errors(form.name) }}</div>
      </div>

      <div>
        {{ form_label(form.email, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
        {{ form_widget(form.email, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'}}) }}
        <div class="text-red-400 text-xs mt-1">{{ form_errors(form.email) }}</div>
      </div>

      <div>
        {{ form_label(form.phoneNumber, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
        {{ form_widget(form.phoneNumber, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'}}) }}
        <div class="text-red-400 text-xs mt-1">{{ form_errors(form.phoneNumber) }}</div>
      </div>

      <div>
        {{ form_label(form.numberOfGuests, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
        {{ form_widget(form.numberOfGuests, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40', 'min': 1}}) }}
        <div class="text-red-400 text-xs mt-1">{{ form_errors(form.numberOfGuests) }}</div>
      </div>
    </div>
  </section>

  {# --- Schedule card --- #}
  <section class="rounded-2xl border border-white/10 bg-neutral-900/40 backdrop-blur-xl p-5 shadow-xl shadow-black/40">
    <div class="flex items-start justify-between gap-4">
      <div>
        <h2 class="text-base font-semibold text-white">Schedule</h2>
        <p class="text-xs text-neutral-400 mt-1">Date, exhibition preference, and status.</p>
      </div>
    </div>

    <div class="mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4">

      <div class="sm:col-span-1">
        {{ form_label(form.date, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
        {{ form_widget(form.date, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'}}) }}
        <div class="text-red-400 text-xs mt-1">{{ form_errors(form.date) }}</div>
      </div>

      {# Status dropdown (if present) #}
      {% if form.status is defined %}
        <div class="sm:col-span-1">
          {{ form_label(form.status, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}

          <div class="relative mt-1">
            {{ form_widget(form.status, { 'attr': {
              'class': 'appearance-none w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 pr-10 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'
            }}) }}
            <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"
                 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>

          <div class="text-xs text-neutral-400 mt-2">Pending / confirmed / cancelled.</div>
          <div class="text-red-400 text-xs mt-1">{{ form_errors(form.status) }}</div>
        </div>
      {% endif %}

      {# Exhibition preference section #}
      <div class="sm:col-span-2">
        <div class="rounded-xl border border-white/10 bg-neutral-950/30 p-4">
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-sm font-semibold text-white">Exhibition preference</div>
              <div class="text-xs text-neutral-400 mt-1">
                Choose an existing exhibition, or type a custom request if it’s not listed.
              </div>
            </div>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">

            {# Existing exhibitions dropdown (if present) #}
            {% if form.exhibition is defined %}
              <div>
                {{ form_label(form.exhibition, 'Select an exhibition (optional)', {label_attr: {'class':'text-sm font-medium text-white'}}) }}
                {{ form_widget(form.exhibition, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40'}}) }}
                <div class="text-red-400 text-xs mt-1">{{ form_errors(form.exhibition) }}</div>
              </div>
            {% endif %}

            {# Custom exhibition request text (only if your form has this field) #}
            {% if form.requestedExhibition is defined %}
              <div>
                {{ form_label(form.requestedExhibition, 'Or type what they want (optional)', {label_attr: {'class':'text-sm font-medium text-white'}}) }}
                {{ form_widget(form.requestedExhibition, {'attr': {
                  'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40',
                  'placeholder': 'e.g., Impressionist paintings, Modern sculpture, Student group tour...'
                }}) }}
                <div class="text-xs text-neutral-400 mt-2">If filled, this will be stored as the visitor’s request.</div>
                <div class="text-red-400 text-xs mt-1">{{ form_errors(form.requestedExhibition) }}</div>
              </div>
            {% endif %}

          </div>

          {# Helpful hint if they have neither field #}
          {% if form.exhibition is not defined and form.requestedExhibition is not defined %}
            <div class="mt-3 text-xs text-amber-300/90">
              Tip: Add an <code class="text-amber-200">exhibition</code> field or a <code class="text-amber-200">requestedExhibition</code> field to your Tour form to capture preferences.
            </div>
          {% endif %}
        </div>
      </div>

    </div>
  </section>

  {# --- Notes card --- #}
  <section class="rounded-2xl border border-white/10 bg-neutral-900/40 backdrop-blur-xl p-5 shadow-xl shadow-black/40">
    <div>
      <h2 class="text-base font-semibold text-white">Notes</h2>
      <p class="text-xs text-neutral-400 mt-1">Internal notes for staff.</p>
    </div>

    <div class="mt-5">
      {{ form_label(form.notes, null, {label_attr: {'class':'text-sm font-medium text-white'}}) }}
      {{ form_widget(form.notes, {'attr': {'class': 'mt-1 block w-full rounded-lg bg-neutral-900/60 text-neutral-100 px-3 py-2 placeholder:text-neutral-500 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/40', 'rows': 4}}) }}
      <div class="text-red-400 text-xs mt-1">{{ form_errors(form.notes) }}</div>
    </div>
  </section>

  <div class="pt-1">
    <button type="submit"
            class="w-full inline-flex items-center justify-center gap-2 bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 text-white font-semibold py-3 px-4 rounded-xl shadow-lg shadow-indigo-500/30">
      {{ btn }}
    </button>
  </div>

{{ form_end(form) }}
